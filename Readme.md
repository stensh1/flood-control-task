#Профильное задание Golang

#Выбор алгоритма
В поиске решения этого таска я пошел гуглить алгоритмы ограничения скорости обработки запросов.
Алгоритм Fixed Window не самый хороший и у него есть свои минусы, например: удвоение количества обработанных запросов на границе окна, но, как мне показалось, он быстрее и легче всего реализуемый, поэтому я выбрал его.
Хотя, алгоритм Sliding Window, наверное, работал бы для подобных задач лучше.

#Реализация
Для наглядности, я решил написать простой веб сервер, в котором, при переходе по определенному пути (/check) должен вызываться метод флуд контроля Check().

Здесь встал вопрос, как отличить запросы с одного устройства от других? - Либо куки, либо id пользователей
Прикручивать систему авторизации, хранения паролей и т.д. не хотелось, поэтому я решил сделать это на кукисах (вполне возможно, что метод может вызываться и пользователем, незалогиненым на сайте)
Куки для простоты являются срезом последних цифр адреса клиента. Сделано это специально, чтобы без проблем отправить эти куки в качестве userID int64 в метод Check().

Для кэша запросов к серверу использовал Redis, как хороший переход от фронта к бэкенду, с высокой пропускной способностью.

#Принцип работы
При первом запросе к серверу (или при скинутых куках) сервер проверяет наличие кукисов в заголовках, если их нет, то высылает новые и регистрирует в редисе нового пользователя (при этом метод Check() не вызывается).
Далее при повторной попытке посетить /check с переданными кукис, сервер инициализирует первый запрос клиента, обновляет счетчик запросов и включает таймер обнуления счетчика, по данным из конфигурационного файла.
При последующих попытках клиента сделать запрос на сервер, сервер обновляет счетчик запросов и сравнивает их общее количество у клиента с установленным максимальным (также настроенным в конфигурационном файле).
Если запросов больше установленного - то выдает ошибку 429.

#Конфигурация
Большая часть данных записана в конфигурационном файле: cgf/config.yaml, как лимиты для сервера, так и настраиваемые хосты и порты для сервера и Redis, кроме пароля для бд, пароль задается в переменной окружения по пути: cfg/.env